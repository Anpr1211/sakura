!function(){"use strict";function e(){return 0}function t(){return f.length=0,f}function n(e){return Boolean(e)&&"[object Object]"===Object.prototype.toString.call(e)}function r(e){return f.push(e),f}function i(e,t,n,r){for(var i in e)if(!o(e[i],r.exclude)&&n.matches(e[i],t))return e}function o(e,t){for(var n=!1,r=0,i=(t=t||[]).length;r<i;r++){var o=t[r];!n&&new RegExp(e).test(o)&&(n=!0)}return n}var a={load:function(e,t){var n=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("GET",e,!0),n.onreadystatechange=(r=n,i=t,function(){if(4===r.readyState&&200===r.status)try{i(null,JSON.parse(r.responseText))}catch(e){i(e,null)}}),n.send();var r,i}},u=function(e,t){var n=t.length,r=e.length;if(n<r)return!1;if(r===n)return e===t;e:for(var i=0,o=0;i<r;i++){for(var a=e.charCodeAt(i);o<n;)if(t.charCodeAt(o++)===a)continue e;return!1}return!0},l=new function(){this.matches=function(e,t){return u(t.toLowerCase(),e.toLowerCase())}},s=new function(){this.matches=function(e,t){return"string"==typeof e&&0<=(e=e.trim()).toLowerCase().indexOf(t.toLowerCase())}},c={put:function(e){if(n(e))return r(e);if(i=e,Boolean(i)&&"[object Array]"===Object.prototype.toString.call(i))return function(e){var i=[];t();for(var o=0,a=e.length;o<a;o++)n(e[o])&&i.push(r(e[o]));return i}(e);var i},clear:t,search:function(e){return e?function(e,t,n,r){for(var o=[],a=0;a<e.length&&o.length<r.limit;a++){var u=i(e[a],t,n,r);u&&o.push(u)}return o}(f,e,p.searchStrategy,p).sort(p.sort):[]},setOptions:function(t){(p=t||{}).fuzzy=t.fuzzy||!1,p.limit=t.limit||10,p.searchStrategy=t.fuzzy?l:s,p.sort=t.sort||e}},f=[],p={};p.fuzzy=!1,p.limit=10,p.searchStrategy=p.fuzzy?l:s,p.sort=e;var d={compile:function(e){return h.template.replace(h.pattern,function(t,n){var r=h.middleware(n,e[n],h.template);return void 0!==r?r:e[n]||t})},setOptions:function(e){h.pattern=e.pattern||h.pattern,h.template=e.template||h.template,"function"==typeof e.middleware&&(h.middleware=e.middleware)}},h={};h.pattern=/\{(.*?)\}/g,h.template="",h.middleware=function(){};var m={merge:function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r],"undefined"!=typeof t[r]&&(n[r]=t[r]));return n},isJSON:function(e){try{return!!(e instanceof Object&&JSON.parse(JSON.stringify(e)))}catch(e){return!1}}};!function(e){function t(e){c.put(e),u.searchInput.addEventListener("keyup",function(e){var t;t=e.which,-1===[13,16,20,37,38,39,40,91].indexOf(t)&&(n(),i(e.target.value))})}function n(){u.resultsContainer.innerHTML=""}function r(e){u.resultsContainer.innerHTML+=e}function i(e){var t;(t=e)&&0<t.length&&(n(),function(e){var t=e.length;if(0===t)return r(u.noResultsText);for(var n=0;n<t;n++)r(d.compile(e[n]))}(c.search(e)))}function o(e){throw new Error("SimpleJekyllSearch --- "+e)}var u={searchInput:null,resultsContainer:null,json:[],searchResultTemplate:'<li class="list-group-item"><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:function(){},sortMiddleware:function(){return 0},noResultsText:'<li class="list-group-item">No results found</li>',limit:10,fuzzy:!1,exclude:[]},l=["searchInput","resultsContainer","json"],s=function e(t){if(n=t,!(n&&"undefined"!=typeof n.required&&n.required instanceof Array))throw new Error("-- OptionsValidator: required options missing");var n;if(!(this instanceof e))return new e(t);var r=t.required;this.getRequiredOptions=function(){return r},this.validate=function(e){var t=[];return r.forEach(function(n){"undefined"==typeof e[n]&&t.push(n)}),t}}({required:l});e.SimpleJekyllSearch=function(e){var n;return 0<s.validate(e).length&&o("You must specify the following required options: "+l),u=m.merge(u,e),d.setOptions({template:u.searchResultTemplate,middleware:u.templateMiddleware}),c.setOptions({fuzzy:u.fuzzy,limit:u.limit,sort:u.sortMiddleware}),m.isJSON(u.json)?t(u.json):(n=u.json,a.load(n,function(e,r){e&&o("failed to get JSON ("+n+")"),t(r)})),{search:i}},e.SimpleJekyllSearch.init=e.SimpleJekyllSearch,"function"==typeof e.SimpleJekyllSearchInit&&e.SimpleJekyllSearchInit.call(this,e.SimpleJekyllSearch)}(window)}();